---
import FigureImage from "../FigureImage.astro";

export interface ImageItem {
  src: string;
  alt: string;
  href?: string;
  position?: string;
  style?: string;
}
export interface Props {
  title: string;
  subtitle: string;
  images: ImageItem[];
}
const { title, subtitle, images } = Astro.props;
---

<div class="grid">
  {
    images.map((img) => (
      <FigureImage
        src={img.src}
        alt={img.alt}
        href={img.href}
        position={img.position}
        width={256}
        height={256}
        fit="cover"
        format="avif"
        loading="eager"
      />
    ))
  }
  <div class="title">
    <h1>{subtitle}</h1>
    <h2>{title}</h2>
  </div>
  <div class="contents">
    <slot>
      <a href="../">Go Back</a>
    </slot>
  </div>
</div>

<style>
  .grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(128px, 1fr));
    gap: clamp(2rem, 4vw, 8rem);
    place-content: center center;
    align-items: center;

    aspect-ratio: 1 / 1;
    height: 70vh;
    margin-block: 2rem;
    margin-inline: auto;

    figure {
      width: fit-content;
      margin: auto;
      transition: scale 1s
        linear(
          0 0%,
          0.22 2.1%,
          0.86 6.5%,
          1.11 8.6%,
          1.3 10.7%,
          1.35 11.8%,
          1.37 12.9%,
          1.37 13.7%,
          1.36 14.5%,
          1.32 16.2%,
          1.03 21.8%,
          0.94 24%,
          0.89 25.9%,
          0.88 26.85%,
          0.87 27.8%,
          0.87 29.25%,
          0.88 30.7%,
          0.91 32.4%,
          0.98 36.4%,
          1.01 38.3%,
          1.04 40.5%,
          1.05 42.7%,
          1.05 44.1%,
          1.04 45.7%,
          1 53.3%,
          0.99 55.4%,
          0.98 57.5%,
          0.99 60.7%,
          1 68.1%,
          1.01 72.2%,
          1 86.7%,
          1 100%
        );

      & figcaption {
        position: absolute;

        width: 128px;
        margin-block: 0.5rem;

        font-size: 1rem;
        text-align: center;

        opacity: 0;

        transition: opacity 0.3s ease;
      }

      &:hover {
        scale: 1.1;

        & figcaption {
          opacity: 1;
        }
      }
    }

    img {
      transform: translateZ(0);

      width: 128px;
      height: 128px;
      border-radius: 0.5rem;

      object-fit: cover;
    }
  }

  .title {
    grid-column: span 3;
    grid-row: 2;
    margin-inline-start: 2em;

    h1,
    h2 {
      margin: 0;
      font-family: Blaster, sans-serif;
      color: var(--accent-950);
    }

    h1 {
      font-size: clamp(1rem, 4vw, 2rem);
    }

    h2 {
      font-size: clamp(2rem, 4vw, 4rem);
    }
  }
</style>
