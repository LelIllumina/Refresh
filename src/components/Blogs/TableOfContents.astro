---
interface Heading {
  depth: number; // The heading level (h1 = 1, h2 = 2, etc)
  slug: string; // The ID of the heading for linking
  text: string; // The text content of the heading
}

interface Props {
  headings: Heading[];
  levels?: 1 | 2 | 3;
}

const { headings, levels = 2 } = Astro.props;
const filteredHeadings = headings.filter((heading) => heading.depth <= levels);
---

<div class="toc-container">
  <h4 class="toc-title">Table of Contents</h4>
  <ul class="toc-list">
    {
      filteredHeadings.map((heading) => (
        <li
          class:list={{
            "toc-indent-2": heading.depth === 2,
            "toc-indent-3": heading.depth === 3,
          }}
        >
          <a href={`#${heading.slug}`} class="toc-link">
            {heading.text}
          </a>
        </li>
      ))
    }
  </ul>
</div>
